<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>studentMS</title>
    <link rel="stylesheet" href="CSS/studentMS_v3_0.css">
</head>
<body>
<h1>清烟遇浪学生管理系统</h1>
    <div class="contanner">
        <table border="1" cellpadding="5" cellspacing="0">
            <thead>
                <tr>
                    <td>选中</td>
                    <td>学号</td>
                    <td>姓名</td>
                    <td>性别</td>
                    <td>年龄</td>
                    <td>班级</td>
                    <td>操作</td>
                </tr>
            </thead>
            <p>
                <p class="height"><input type="text" id="stuNoInput" /> <button id="searchByNo">学号搜索</button></p>
                <p class="height"><input type="text" id="nameInput" /> <button id="searchByName">姓名搜索</button></p>
            </p>
            <p class="height">
                <button id="btnAdd">添加</button>
                <button onclick="delAllStu()">全部删除</button>
                <button onclick="delBatchStu()">删除选中</button>
            </p>
            <tbody id="stuData">

            </tbody>
        </table>
    </div>
    <div id="addstuDiv">
        <h2 id="myAddH2">学生信息</h2>
        <form action="#" id="addStudentForm">
            <p>姓名： <input id="addStuName" type="text" /></p>
            <p>性别：
                <select name="" id="addStuSexSelect">
                    <option name="addStuSex" value="男">男</option>
                    <option name="addStuSex" value="女">女</option>
                </select>
            </p>
            <p>年龄： <input id="addStuAge" type="number" /></p>
            <p>班级： <input id="addStuClass" type="text" /></p>
            <p>
                <button id="btnAddStudent">保存</button>
                <button id="canleAdd">取消</button>
            </p>
        </form>
    </div>
    <div id="zhezhao" class=""></div>
    <script type="text/javascript" src="JavaScript/studentMS_v3_0.js"></script>
    <script src="JavaScript/jQuery3.14.js"></script>
    <script type="text/javascript">
        displayStuData();
        $("#searchByName").click(searchByStuName);
        $("#searchByNo").click(searchByStuNoFn);
        $("#btnAdd").click(showModule);
        $("#btnAddStudent").click(addStu);
        $("#canleAdd").click(hideModule);
        $("#zhezhao").click(hideModule);
        $("#zhezhao").click(hideModule);
        hideModule();
        function showModule() {
            $("#addstuDiv").addClass("show");
            $("#addstuDiv").removeClass("hide");
            $("#zhezhao").addClass("show");
            $("#zhezhao").removeClass("hide");
        }
        function hideModule() {
            $("#addstuDiv").addClass("hide");
            $("#addstuDiv").removeClass("show");
            $("#zhezhao").addClass("hide");
            $("#zhezhao").removeClass("show");
        }
//        按姓名搜索学生
        function searchByStuName() {
            var stuName = $("#nameInput").val();
            $("#stuData").html("");
            for (var i = 0; i < studentArr.length; i++) {
                if (stuName == studentArr[i].stuName) {
                    $("#stuData").append(`<tr><td><input name='checkStu' type='checkbox' value='${studentArr[i].stuNo}'></td><td>${studentArr[i].stuNo}</td><td>${studentArr[i].stuName}</td>
                    <td>${studentArr[i].stuSex}</td><td>${studentArr[i].stuAge}</td>
                    <td>${studentArr[i].stuClass}</td>
                    <td><button onclick='studel(${studentArr[i].stuNo})'>删除</button>
                    <button onclick='upData(${studentArr[i].stuNo})'>修改</button><button onclick="displayStuData()">显示全部学生</button></td></tr>`);
                }
            }
            $("#nameInput").val("");
        }
//        按学号搜索学生
        function searchByStuNoFn() {
            var stuNo = $("#stuNoInput").val();
            $("#stuData").html("");
            for(var i=0;i<studentArr.length;i++){
                if (stuNo==studentArr[i].stuNo){
                    $("#stuData").append(`<tr><td><input name='checkStu' type='checkbox' value='${studentArr[i].stuNo}'></td><td>${studentArr[i].stuNo}</td><td>${studentArr[i].stuName}</td>
                    <td>${studentArr[i].stuSex}</td><td>${studentArr[i].stuAge}</td>
                    <td>${studentArr[i].stuClass}</td>
                    <td><button onclick='studel(${studentArr[i].stuNo})'>删除</button>
                    <button onclick='upData(${studentArr[i].stuNo})'>修改</button><button onclick="displayStuData()">显示全部学生</button></td></tr>`);
                }
            }
            $("#stuNoInput").val("");
        }
//        显示学生列表
        function displayStuData() {
            $("#stuData").html("");
            for (var i = 0; i < studentArr.length; i++) {
                    $("#stuData").append(`<tr><td><input name='checkStu' type='checkbox' value='${studentArr[i].stuNo}'></td><td>${studentArr[i].stuNo}</td><td>${studentArr[i].stuName}</td>
                    <td>${studentArr[i].stuSex}</td><td>${studentArr[i].stuAge}</td>
                    <td>${studentArr[i].stuClass}</td>
                    <td><button onclick='delStu(${studentArr[i].stuNo})'>删除</button>
                    <button onclick='upData(${studentArr[i].stuNo})'>修改</button></td></tr>`);
            }
        }
//        删除学生
        function delStu(stuNo) {
            for(var i=0;i<studentArr.length;i++){
                if(stuNo==studentArr[i].stuNo){
                    studentArr.splice(i,1);
                    break;
                }
            }
            displayStuData();
        }
//        删除全部学生
        function delAllStu() {
            studentArr=[];
            displayStuData();
        }
//        添加学生
        function addStu() {
            var name = $("#addStuName").val();;
            var sex = $("#addStuSexSelect").val();
            var age = $("#addStuAge").val();
            var className = $("#addStuClass").val();
            var stuNo = studentArr[studentArr.length-1].stuNo+1;
            var stuObj = {"stuNo":stuNo,"stuName":name,"stuSex":sex,"stuAge":age,"stuClass":className};
            studentArr.push(stuObj);
            hideModule();
            displayStuData();
        }
</script>
</body>
</html>